<div class="portlet light portlet-form bordered">
    <div class="portlet-title">
        <div class="caption font-yellow-crusta">
            <i class="fa fa-money font-yellow-crusta"></i>@(bills:Billing)
        </div>
    </div>
    <div class="portlet-body">
        <div class="row">
            <div class="col-md-8 col-sm-12">
                <form editable-form name="editableCommercial" onaftersave="update()">
                    <div class="portlet light portlet-form bordered">
                        <div class="portlet-title">
                            <div class="caption">
                                <i class="fa fa-cog"></i> @(bills:BillingSettings)
                            </div>
                            <div class="actions">
                                <a href="javascript:;" ng-click="editableCommercial.$show()" ng-show="!editableCommercial.$visible && editable" class="btn btn-circle btn-default">
                                    <i class="fa fa-pencil"></i> @(Edit) </a>
                            </div>
                            <div class="actions" ng-show="editableCommercial.$visible">
                                <button type="submit" ng-disabled="editableCommercial.$waiting" class="btn btn-circle btn-outline uppercase green"><i class="fa fa-check"></i> @(Save) </button>
                                <button type="button" ng-disabled="editableCommercial.$waiting" ng-click="editableCommercial.$cancel();
                            findOne();" class="btn btn-circle btn-outline uppercase red">@(Cancel) <i class="fa fa-angle-right"></i></button>
                            </div>
                        </div>
                        <div class="portlet-body">
                            <div class="form-group form-md-line-input">
                                <div class="row static-info">
                                    <div class="col-md-3 name">
                                        @(companies:ThirdPartyBilling)
                                    </div>
                                    <div class="col-md-3 value">
                                        <span editable-text="societe.cptBilling" e-typeahead="societe as societe.name for societe in AutoComplete($viewValue, '/erp/api/societe/autocomplete') | filter:{name:$viewValue}" e-placeholder="@(companies:ThirdPartyBillingDesc)">
                                {{societe.cptBilling.name|| "Lui-même"}}
                            </span>
                                    </div>
                                    <div class="col-md-3 name">
                                        @(companies:ImportExport)
                                    </div>
                                    <div class="col-md-3 value">
                                        <span editable-select="societe.importExport" e-ng-options="s.id as s.name for s in importExport">
                                {{ societe.importExport }}
                            </span>
                                    </div>
                                </div>


                                <div class="row static-info">
                                    <div class="col-md-3 name">
                                        @(compta:SupplierAccountancyCodeShort)
                                    </div>
                                    <div class="col-md-3 value">
                                        <span editable-text="societe.code_compta_fournisseur">
                                {{ societe.code_compta_fournisseur || '@(main:Undefined)' }}
                            </span>
                                    </div>
                                    <div class="col-md-3 name">
                                        @(compta:CustomerAccountancyCodeShort)
                                    </div>
                                    <div class="col-md-3 value">
                                        <span editable-text="societe.code_compta">
                                {{ societe.code_compta || '@(main:Undefined)' }}
                            </span>
                                    </div>
                                </div>

                                <div class="row static-info">
                                    <div class="col-md-3 name">
                                        @(companies:GroupDeliveries)
                                    </div>
                                    <div class="col-md-1 value">
                                        <input uniform type="checkbox" ng-model="societe.groupDelivery" ng-checked="societe.groupDelivery" ng-disabled="!editableCommercial.$visible" />
                                    </div>
                                    <div class="col-md-1 name">
                                        @(companies:VATIsUsed)
                                    </div>
                                    <div class="col-md-1 value">
                                        <input uniform type="checkbox" ng-model="societe.VATIsUsed" ng-checked="societe.VATIsUsed" ng-disabled="!editableCommercial.$visible" />
                                    </div>
                                    <div class="col-md-3 name">
                                        @(companies:VATIntra)
                                    </div>
                                    <div class="col-md-3 value">
                                        <span editable-text="societe.idprof6">
                                {{ societe.idprof6 || '@(main:Undefined)' }}
                            </span>
                                    </div>
                                </div>

                                <div class="row static-info">
                                    <div class="col-md-3 name">
                                        @(bills:PaymentConditions)
                                    </div>
                                    <div class="col-md-3 value">
                                        <span editable-select="societe.cond_reglement" e-ng-options="s.id as s.label for s in dict.fk_payment_term.values">
                                {{ showStatus('cond_reglement', 'fk_payment_term')}}
                            </span>
                                    </div>
                                    <div class="col-md-3 name">
                                        @(bills:PaymentMode)
                                    </div>
                                    <div class="col-md-3 value">
                                        <span editable-select="societe.mode_reglement" e-ng-options="s.id as s.label for s in dict.fk_paiement.values">
                                {{ showStatus('mode_reglement', 'fk_paiement')}}
                            </span>
                                    </div>
                                </div>
                                <div class="row static-info">
                                    <div class="col-md-3 name">
                                        @(bills:PaymentBank)
                                    </div>
                                    <div class="col-md-3 value">
                                        <span editable-select="societe.bank_reglement" e-ng-options="s.ref as s.ref for s in banks">
                                {{societe.bank_reglement|| '@(main:Undefined)'}}
                            </span>
                                    </div>
                                    <div class="col-md-3 name">
                                        @(products:PriceLevel)
                                    </div>
                                    <div class="col-md-3 value">
                                        <span editable-text="societe.price_level" e-typeahead="price_level.name for price_level in priceLevelAutoComplete($viewValue, 'name') | filter:{name:$viewValue}">
                                {{ societe.price_level || '@(main:Undefined)' }}
                            </span>
                                    </div>
                                </div>

                                <div class="row static-info">
                                    <div class="col-md-3 name">
                                        @(bank:BankName) :
                                    </div>
                                    <div class="col-md-3 value">
                                        <span editable-text="societe.iban.bank">
                                {{ societe.iban.bank || '@(main:Undefined)' }}
                            </span>
                                    </div>
                                    <div class="col-md-3 name">
                                        @(bank:BIC/SWIFT) :
                                    </div>
                                    <div class="col-md-3 value">
                                        <span editable-text="societe.iban.swift">
                                {{ societe.iban.swift || '@(main:Undefined)' }}
                            </span>
                                    </div>
                                </div>
                                <div class="row static-info">
                                    <div class="col-md-3 name">
                                        @(bank:IBAN) :
                                    </div>
                                    <div class="col-md-9 value">
                                        <span editable-text="societe.iban.id">
                                {{ societe.iban.id || '@(main:Undefined)' }}
                            </span>
                                    </div>
                                </div>

                            </div>
                        </div>


                    </div>
                </form>
            </div>

            <!-- END COL 4-->
            <div class="col-md-4">
                <div class="portlet light portlet-form bordered">
                    <div class="portlet-title">
                        <div class="caption">
                            <i class="fa fa-line-chart"></i> @(Summary)
                        </div>
                        <div class="tools">
                            <a class="reload" href="javascript:;" data-original-title="" title="">
                            </a>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div class="row static-info">
                            <div class="col-md-8 name">
                                @(bills:LastBill)
                            </div>
                            <div class="col-md-4 value">
                                <span editable-text="societe.idprof5">{{societe.idprof5|| "Non défini"}}
                            </span>
                            </div>
                        </div>
                        <div class="row static-info">
                            <div class="col-md-8 name">
                                @(bills:LastPayment)
                            </div>
                            <div class="col-md-4 value">
                                <span editable-text="societe.idprof5">{{societe.idprof5|| "Non défini"}}
                            </span>
                            </div>
                        </div>
                        <div class="row static-info">
                            <div class="col-md-8 name">
                                @(bills:TotalInvoicedThisMonth)
                            </div>
                            <div class="col-md-4 value">
                                <span editable-text="societe.idprof5">{{societe.idprof5|| "Non défini"}}
                            </span>
                            </div>
                        </div>
                        <div class="row static-info">
                            <div class="col-md-8 name">
                                @(bills:TotalInvoicedThisYear)
                            </div>
                            <div class="col-md-4 value">
                                <span editable-text="societe.idprof5">{{societe.idprof5|| "Non défini"}}
                            </span>
                            </div>
                        </div>
                        <div class="row static-info">
                            <div class="col-md-8 name">
                                @(bills:RemainderToTake)
                            </div>
                            <div class="col-md-4 value">
                                <span editable-text="societe.idprof5">{{societe.idprof5|| "Non défini"}}
                            </span>
                            </div>
                        </div>
                        <div class="row static-info">
                            <div class="col-md-8 name">
                                Délai de paiement
                            </div>
                            <div class="col-md-4 value">
                                <span editable-text="societe.idprof5">{{societe.idprof5|| "Non défini"}}
                            </span>
                            </div>
                        </div>

                    </div>
                </div>

            </div>
        </div>
        <div class="row">
            <div class='col-md-12'>
                <!--INVOICE TABLE-->
                <tabset class="tabbable-line tabbable-full-width">
                    <tab heading="@(bills:BillsCustomer)">
                        <div ng-include="'/templates/_bill/list.html'" ng-controller="BillController" onload="ngIncludeInit({'client.id': societe._id}, 5)"></div>
                    </tab>

                    <tab heading="@(bills:BillsSupplier)">
                        <div class="portlet-body">
                            <div class="table-toolbar">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="btn-group pull-left">
                                            <button class="btn blue" data-ng-click="addNew()">@(Add) <i class="fa fa-plus"></i></button>
                                            <button title="@(Refresh)" class="btn" data-ng-click="
                                        commercialList = [];
                                        commercial_id = '';
                                        status_id = null;
                                        filterOptionsSociete.filterText = '';
                                        clearCache();
                                        find();"><i class="fa fa-refresh"></i></button>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="btn-group pull-right">
                                            <button class="btn dropdown-toggle" data-toggle="dropdown">@(Tools) <i class="fa fa-angle-down"></i>
                                    </button>
                                            <ul class="dropdown-menu pull-right">
                                                <li>
                                                    <a href="#">
                                                @(Update) </a>
                                                </li>
                                                <li>
                                                    <a href="#">
                                                @(Delete) </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="dataTables_wrapper no-footer">
                                <table class="table table-striped table-bordered table-hover" id="societeListInvoicesSuppliers">
                                    <thead>
                                        <tr role="row" class="heading">
                                            <th width="2%">
                                                <input type="checkbox" class="group-checkable">
                                            </th>
                                            <th>@(bills:InvoiceId)</th>
                                            <th>@(bills:Date)</th>
                                            <th>@(bills:DateEcheance)</th>
                                            <th>@(bills:NetToBePaid)</th>
                                            <th>@(bills:AlreadyPaid)</th>
                                            <th>@(bills:StillToBeDisbursed)</th>
                                            <th>@(Status)</th>
                                            <th>@(DateLastModification)</th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>
                    </tab>
                    <tab heading="@(bills:InvoicePayment)">
                        <div class="portlet-body">
                            <div class="table-toolbar">
                                <div class="row">
                                    <div class="col-md-6" ng-show="!global.user.rights.bill.read">
                                        <div class="btn-group pull-left">
                                            <button class="btn blue" disabled data-ng-click="paymentBills()">@(Add) <i class="fa fa-plus"></i></button>
                                            <button title="@(Refresh)" class="btn" data-ng-click="
                                        commercialList = [];
                                        commercial_id = '';
                                        status_id = null;
                                        filterOptionsSociete.filterText = '';
                                        clearCache();
                                        find();"><i class="fa fa-refresh"></i></button>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="btn-group pull-right">
                                            <button class="btn dropdown-toggle" data-toggle="dropdown">@(Tools) <i class="fa fa-angle-down"></i>
                                    </button>
                                            <ul class="dropdown-menu pull-right">
                                                <li>
                                                    <a href="#">
                                                @(Update) </a>
                                                </li>
                                                <li>
                                                    <a href="#">
                                                @(Delete) </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="dataTables_wrapper no-footer">
                                <table class="table table-striped table-bordered table-hover" id="societeListInvoicePayment">
                                    <thead>
                                        <tr role="row" class="heading">
                                            <th width="2%">
                                                <input type="checkbox" class="group-checkable">
                                            </th>
                                            <th>@(bills:DatePayment)</th>
                                            <th>@(bills:TypePayment)</th>
                                            <th>@(bills:NumberCheckTrans)</th>
                                            <th>@(bills:Bank)</th>
                                            <th>@(bills:PaymentBank)</th>
                                            <th>@(bills:PaymentAmout)</th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>
                    </tab>
                </tabset>
            </div>
        </div>
    </div>
</div>